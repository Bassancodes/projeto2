"use strict";(self.webpackChunkschedula_form=self.webpackChunkschedula_form||[]).push([[6324],{332:function(n,e,t){t.r(e),t.d(e,{default:function(){return wn}});var r=t(74165),i=t(15861),o=t(29439),a=t(1413),s=t(4942),l=t(72791),c=t(71861),u=t(20659),d=t(58121),h=t.n(d),p=t(82279),f=t(66934),x=t(13967),j=t(54648),m=t(72131),b=t(14101),g=t.n(b),y=t(65166),Z=t(94728),w=(t(66131),t(80184)),v=function(n){var e=n.oldRevision,t=n.newRevision,r=n.type,i=n.hunks;return(0,w.jsx)(Z.zI,{viewType:"split",diffType:r,hunks:i,children:function(n){return n.map((function(n){return(0,w.jsx)(Z.SC,{hunk:n},n.content)}))}},e+"-"+t)};function C(n){var e=n.oldValue,t=n.newValue,r=(0,y.formatLines)((0,y.diffLines)(e,t),{context:3}),i=(0,Z.z2)(r);return(0,w.jsx)("div",{children:i.map(v)})}var z=l.lazy((function(){return t.e(2971).then(t.bind(t,2971))})),S=l.lazy((function(){return t.e(2504).then(t.bind(t,82504))})),k=l.lazy((function(){return Promise.all([t.e(2770),t.e(4298)]).then(t.bind(t,31234))})),P=l.lazy((function(){return t.e(2044).then(t.bind(t,82044))})),D=l.lazy((function(){return t.e(5678).then(t.bind(t,95678))})),R=l.lazy((function(){return t.e(6473).then(t.bind(t,13453))})),W=l.lazy((function(){return t.e(9212).then(t.bind(t,69212))})),E=l.lazy((function(){return Promise.all([t.e(2770),t.e(8711),t.e(8654),t.e(6942)]).then(t.bind(t,26942))})),L=l.lazy((function(){return t.e(7078).then(t.bind(t,37078))})),O=l.lazy((function(){return t.e(6389).then(t.bind(t,46389))})),A=l.lazy((function(){return t.e(5182).then(t.bind(t,15182))})),T=l.lazy((function(){return t.e(5662).then(t.bind(t,45662))})),H=l.lazy((function(){return t.e(9076).then(t.bind(t,9076))})),I=l.lazy((function(){return t.e(8008).then(t.bind(t,98008))})),N=l.lazy((function(){return t.e(1009).then(t.bind(t,31009))})),M=l.lazy((function(){return t.e(8996).then(t.bind(t,38996))})),V=l.lazy((function(){return t.e(7039).then(t.bind(t,17039))})),F=l.lazy((function(){return t.e(7886).then(t.bind(t,97886))})),J=l.lazy((function(){return t.e(6108).then(t.bind(t,86108))})),U=l.lazy((function(){return t.e(8778).then(t.bind(t,38778))})),G=l.lazy((function(){return t.e(6237).then(t.bind(t,36237))})),_=l.lazy((function(){return t.e(1073).then(t.bind(t,81073))})),X=l.lazy((function(){return Promise.resolve().then(t.bind(t,44392))})),$=l.lazy((function(){return t.e(6445).then(t.bind(t,6445))})),B=l.lazy((function(){return t.e(3154).then(t.bind(t,93154))})),q=l.lazy((function(){return Promise.all([t.e(2770),t.e(8610),t.e(7639),t.e(3416)]).then(t.bind(t,95243))})),K=l.lazy((function(){return t.e(5029).then(t.bind(t,85029))})),Q=l.lazy((function(){return t.e(9188).then(t.bind(t,19188))})),Y=l.lazy((function(){return t.e(553).then(t.bind(t,553))})),nn=l.lazy((function(){return t.e(1650).then(t.bind(t,41650))})),en=l.lazy((function(){return t.e(7125).then(t.bind(t,97125))})),tn=l.lazy((function(){return t.e(7751).then(t.bind(t,47751))})),rn=l.lazy((function(){return t.e(3198).then(t.bind(t,53198))})),on=l.lazy((function(){return Promise.all([t.e(2770),t.e(8711),t.e(1310)]).then(t.bind(t,5401))})),an=l.lazy((function(){return t.e(7368).then(t.bind(t,77368))})),sn=l.lazy((function(){return t.e(2812).then(t.bind(t,12812))})),ln=l.lazy((function(){return t.e(9056).then(t.bind(t,89056))})),cn=l.lazy((function(){return t.e(1963).then(t.bind(t,61963))})),un=l.lazy((function(){return t.e(6711).then(t.bind(t,86711))})),dn=l.lazy((function(){return t.e(8249).then(t.bind(t,58249))}));function hn(n){var e=n.children,t=n.window,r=n.anchor,i=(0,p.Z)({target:t?t():void 0,disableHysteresis:!0,threshold:100});return(0,w.jsx)(k,{in:i,children:(0,w.jsx)(S,{onClick:function(n){r.current.scrollIntoView({block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:e})})}var pn=240,fn=function(n){return{width:pn,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen}),overflowX:"hidden"}},xn=function(n){return(0,s.Z)({transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(n.spacing(7)," + 1px)")},n.breakpoints.up("sm"),{width:"calc(".concat(n.spacing(7)," + 1px)")})},jn=(0,f.ZP)("div")((function(n){var e=n.theme;return(0,a.Z)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)})),mn=(0,f.ZP)(L,{shouldForwardProp:function(n){return"open"!==n}})((function(n){var e=n.theme,t=n.open;return(0,a.Z)({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},t&&{marginLeft:pn,width:"calc(100% - ".concat(pn,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})})),bn=(0,f.ZP)(E,{shouldForwardProp:function(n){return"open"!==n}})((function(n){var e=n.theme,t=n.open;return(0,a.Z)((0,a.Z)({width:pn,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},t&&(0,a.Z)((0,a.Z)({},fn(e)),{},{"& .MuiDrawer-paper":fn(e)})),!t&&(0,a.Z)((0,a.Z)({},xn(e)),{},{"& .MuiDrawer-paper":xn(e)}))})),gn=function(n,e){return e.forEach((function(e){return(0,c.applyChange)(n,null,e)})),n},yn=function(n,e){return(n=n.filter((function(n,t){var r=(0,o.Z)(n,2),i=r[0];r[1];return 0===t||i<=e}))).slice(1).reduce((function(n,e){var t=(0,o.Z)(e,2),r=(t[0],t[1]);return gn(n,r)}),h()(n[0][1]))},Zn=function(n,e){var t,r=window.sessionStorage.getItem(n)||"",i=r.slice(28);return i=i?u.ZP.decompress.fromString(i):[],t=yn.bind(null,i),r.slice(0,28)===e&&(i=i.slice(0,i.length-1)),i.map((function(n){var r=(0,o.Z)(n,3),i=r[0],a=(r[1],r[2]);return[i,t,e===a]}))};function wn(n){var e=l.useState(!n.hasOwnProperty("savingData")||n.savingData),t=(0,o.Z)(e,2),s=t[0],d=t[1],p=l.useState(n.current_tab||0),f=(0,o.Z)(p,2),b=f[0],y=f[1],Z=(0,x.Z)(),v=l.useState(!1),k=(0,o.Z)(v,2),E=k[0],pn=k[1],fn="schedula-"+n.context.props.formContext.$id+"-"+n.context.props.idSchema.$id+"-formData",xn=n.context.props.formData;(0,l.useEffect)((function(){if(s)try{!function(n,e){var t=g()(e,{algorithm:"sha1",encoding:"base64"}),r=window.sessionStorage.getItem(n)||"";if(r.slice(0,28)!==t){var i,a=r.slice(28);a=a?u.ZP.decompress.fromString(a):[];var s=Math.floor(Date.now()/6e4);if((a=a.filter((function(n,e){var t=(0,o.Z)(n,2),r=t[0];return t[1],r<s}))).length){if(!(i=(0,c.diff)(a.slice(1).reduce((function(n,e){var t=(0,o.Z)(e,2),r=(t[0],t[1]);return gn(n,r)}),h()(a[0][1])),e)))return}else i=e;a.push([s,i,t]),window.sessionStorage.setItem(n,"".concat(t).concat(u.ZP.compress.toString(a)))}}(fn,xn)}catch(n){d(!1),alert("Ops..".concat(s," disabling auto-saving because:\n\n").concat(n.message))}}),[fn,xn,s]);var yn=n["disable-drawer"]?L:mn,wn=l.useState(!1),vn=(0,o.Z)(wn,2),Cn=vn[0],zn=vn[1],Sn=l.useState(!1),kn=(0,o.Z)(Sn,2),Pn=kn[0],Dn=kn[1],Rn=l.useState(null),Wn=(0,o.Z)(Rn,2),En=Wn[0],Ln=Wn[1],On=function(){Dn(!1),Ln(null)},An=null;Cn&&(An=g()(xn,{algorithm:"sha1",encoding:"base64"}));var Tn=l.useRef(null),Hn=(0,m.Z)(n.context.props.formContext.ref),In=(0,o.Z)(Hn,2),Nn=In[0],Mn=In[1],Vn=Mn.isEnabled,Fn=Mn.toggleFullscreen;return(0,w.jsx)(l.Suspense,{children:(0,w.jsxs)(S,{sx:{display:"flex"},children:[(0,w.jsx)(A,{}),(0,w.jsx)(yn,{color:"inherit",position:"fixed",open:E,children:(0,w.jsxs)(z,{children:[n["disable-drawer"]?null:(0,w.jsx)(H,{color:"inherit","aria-label":"open drawer",onClick:function(){pn(!0)},edge:"start",sx:(0,a.Z)({},E&&{display:"none"}),children:(0,w.jsx)(I,{})}),(0,w.jsx)(S,{sx:{marginLeft:5},children:n["children-left"]},0),n["disable-tabs"]?null:(0,w.jsx)(R,(0,a.Z)((0,a.Z)({value:b,onChange:function(n,e){y(e)},sx:{flexGrow:1}},n),{},{children:n.children.map((function(e,t){return(0,w.jsx)(W,(0,a.Z)((0,a.Z)({label:(e.props.schema||{}).title||""},(n["tabs-props"]||{})[t]||{}),function(n){return{id:"tab-".concat(n),"aria-controls":"tabpanel-".concat(n)}}(t)),t)}))}),1),(0,w.jsx)(S,{children:n["children-right"]},2)]})}),n["disable-drawer"]?null:(0,w.jsxs)(bn,{variant:"permanent",open:E,children:[(0,w.jsx)(jn,{children:(0,w.jsx)(H,{onClick:function(){pn(!1)},children:"rtl"===Z.direction?(0,w.jsx)(M,{}):(0,w.jsx)(N,{})})}),(0,w.jsx)(T,{}),(0,w.jsxs)(O,{children:[!Vn||n["disable-fullscreen"]?null:(0,w.jsx)(q,(0,a.Z)((0,a.Z)({title:"Enable/Disable fullscreen",arrow:!0,placement:"right"},n["props-tooltip-fullscreen"]),{},{children:(0,w.jsx)(V,{disablePadding:!0,children:(0,w.jsxs)(F,(0,a.Z)((0,a.Z)({sx:{minHeight:48,justifyContent:E?"initial":"center",px:2.5},onClick:Fn},n["props-fullscreen"]),{},{children:[(0,w.jsx)(J,{sx:{minWidth:0,mr:E?3:"auto",justifyContent:"center"},children:Nn?(0,w.jsx)(Q,{}):(0,w.jsx)(K,{})}),(0,w.jsx)(U,{primary:"FULLSCREEN",sx:{opacity:E?1:0}})]}))},"fullscreen")})),n["disable-run"]?null:(0,w.jsx)(q,(0,a.Z)((0,a.Z)({title:"Run current data",arrow:!0,placement:"right"},n["props-tooltip-run"]),{},{children:(0,w.jsx)(V,{disablePadding:!0,children:(0,w.jsxs)(F,(0,a.Z)((0,a.Z)({component:"button",type:"submit",formMethod:"POST",sx:{minHeight:48,justifyContent:E?"initial":"center",px:2.5}},n["props-run"]),{},{children:[(0,w.jsx)(J,{sx:{minWidth:0,mr:E?3:"auto",justifyContent:"center"},children:(0,w.jsx)(B,{})}),(0,w.jsx)(U,{primary:"RUN",sx:{opacity:E?1:0}})]}))},"run")})),n["disable-debug"]?null:(0,w.jsx)(q,(0,a.Z)((0,a.Z)({title:"Debug current data",arrow:!0,placement:"right"},n["props-tooltip-debug"]),{},{children:(0,w.jsx)(V,{disablePadding:!0,children:(0,w.jsxs)(F,(0,a.Z)((0,a.Z)({component:"button",type:"submit",formMethod:"POST",headers:JSON.stringify({Debug:"true"}),sx:{minHeight:48,justifyContent:E?"initial":"center",px:2.5}},n["props-debug"]),{},{children:[(0,w.jsx)(J,{sx:{minWidth:0,mr:E?3:"auto",justifyContent:"center"},children:(0,w.jsx)(dn,{})}),(0,w.jsx)(U,{primary:"DEBUG",sx:{opacity:E?1:0}})]}))},"debug")})),n["disable-upload"]?null:(0,w.jsx)(q,(0,a.Z)((0,a.Z)({title:"Upload data",arrow:!0,placement:"right"},n["props-tooltip-upload"]),{},{children:(0,w.jsx)(V,{disablePadding:!0,children:(0,w.jsxs)(F,(0,a.Z)((0,a.Z)({component:"label",sx:{minHeight:48,justifyContent:E?"initial":"center",px:2.5}},n["props-upload"]),{},{children:[(0,w.jsx)(J,{sx:{minWidth:0,mr:E?3:"auto",justifyContent:"center"},children:(0,w.jsx)($,{})}),(0,w.jsx)(U,{primary:"UPLOAD",sx:{opacity:E?1:0}}),(0,w.jsx)("input",{accept:["json"],type:"file",hidden:!0,onChange:function(e){if(e.preventDefault(),e.target.files.length){var t=new FileReader;t.onload=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.target,n.context.props.onChange(JSON.parse(i.result));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t.readAsText(e.target.files[0]),e.target.value=null}}})]}))},"upload")})),n["disable-download"]?null:(0,w.jsx)(q,(0,a.Z)((0,a.Z)({title:"Download current data",arrow:!0,placement:"right"},n["props-tooltip-download"]),{},{children:(0,w.jsx)(V,{disablePadding:!0,children:(0,w.jsxs)(F,(0,a.Z)((0,a.Z)({sx:{minHeight:48,justifyContent:E?"initial":"center",px:2.5},onClick:function(){(0,j.exportJson)({data:n.context.props.formData,fileName:"".concat(n.context.props.name||"file",".json")})}},n["props-download"]),{},{children:[(0,w.jsx)(J,{sx:{minWidth:0,mr:E?3:"auto",justifyContent:"center"},children:(0,w.jsx)(X,{})}),(0,w.jsx)(U,{primary:"DOWNLOAD",sx:{opacity:E?1:0}})]}))},"download")})),n["disable-datasaver"]?null:(0,w.jsx)(q,(0,a.Z)((0,a.Z)({title:(s?"Stop saving":"Save")+" data on the sessionStorage of the browser",arrow:!0,placement:"right"},n["props-tooltip-datasaver"]),{},{children:(0,w.jsx)(V,{disablePadding:!0,children:(0,w.jsxs)(F,(0,a.Z)((0,a.Z)({component:"button",sx:{minHeight:48,justifyContent:E?"initial":"center",px:2.5},onClick:function(){d(!s)}},n["props-datasaver"]),{},{children:[(0,w.jsx)(J,{sx:{minWidth:0,mr:E?3:"auto",justifyContent:"center"},children:s?(0,w.jsx)(Y,{}):(0,w.jsx)(nn,{})}),(0,w.jsx)(U,{primary:"DATASAVER",sx:{opacity:E?1:0}})]}))},"datasaver")})),n["disable-restore"]?null:(0,w.jsx)(q,(0,a.Z)((0,a.Z)({title:"Restore data",arrow:!0,placement:"right"},n["props-tooltip-restore"]),{},{children:(0,w.jsx)(V,{disablePadding:!0,children:(0,w.jsxs)(F,(0,a.Z)((0,a.Z)({component:"label",sx:{minHeight:48,justifyContent:E?"initial":"center",px:2.5},onClick:function(){zn(!0)}},n["props-restore"]),{},{children:[(0,w.jsx)(J,{sx:{minWidth:0,mr:E?3:"auto",justifyContent:"center"},children:(0,w.jsx)(en,{})}),(0,w.jsx)(U,{primary:"RESTORE DATA",sx:{opacity:E?1:0}})]}))},"restore")})),n["disable-delete"]?null:(0,w.jsx)(q,(0,a.Z)((0,a.Z)({title:"Cleanup current data",arrow:!0,placement:"right"},n["props-tooltip-delete"]),{},{children:(0,w.jsx)(V,{disablePadding:!0,children:(0,w.jsxs)(F,(0,a.Z)((0,a.Z)({component:"label",sx:{minHeight:48,justifyContent:E?"initial":"center",px:2.5},onClick:function(){n.context.props.onChange({})}},n["props-delete"]),{},{children:[(0,w.jsx)(J,{sx:{minWidth:0,mr:E?3:"auto",justifyContent:"center"},children:(0,w.jsx)(un,{})}),(0,w.jsx)(U,{primary:"CLEAN",sx:{opacity:E?1:0}})]}))},"delete")}))]})]}),(0,w.jsxs)(S,(0,a.Z)((0,a.Z)({component:"main",sx:{bgcolor:"background.paper",flexGrow:1,py:3,pl:3,pr:"67px"}},n["props-main"]),{},{children:[(0,w.jsx)(jn,{}),(0,w.jsx)("div",{ref:Tn}),n.children.map((function(n,e){return Math.abs(b)===e?n:null}))]})),(0,w.jsx)(hn,{anchor:Tn,children:(0,w.jsx)(P,{size:"small","aria-label":"scroll back to top",children:(0,w.jsx)(D,{})})}),(0,w.jsxs)(on,{fullWidth:!0,maxWidth:"sm",scroll:"paper",onClose:function(){zn(!1)},open:Cn,children:[(0,w.jsx)(rn,{children:"Restore data"}),(0,w.jsx)(an,{dividers:!0,children:(0,w.jsxs)(O,{sx:{pt:0},children:[Cn?Zn(fn,An).reverse().map((function(e,t){var r=(0,o.Z)(e,3),i=r[0],a=r[1],s=r[2];return(0,w.jsxs)(V,{secondaryAction:s?null:(0,w.jsx)(H,{onClick:function(){Ln([i,a(i)]),Dn(!0)},children:(0,w.jsx)(q,{title:"Show data difference",arrow:!0,placement:"left",children:(0,w.jsx)(tn,{})})}),children:[(0,w.jsx)(G,{sx:{cursor:"pointer"},onClick:function(){zn(!1),n.context.props.onChange(a(i))},children:(0,w.jsx)(q,{title:"Restore data",arrow:!0,placement:"right",children:(0,w.jsx)(_,{children:(0,w.jsx)(cn,{})})})}),(0,w.jsx)(U,{primary:new Date(6e4*i).toLocaleString()})]},t)})):null,(0,w.jsxs)(on,{scroll:"paper",open:Pn,onClose:On,fullWidth:!0,maxWidth:"xl",children:[(0,w.jsx)(rn,{children:"Show difference"}),(0,w.jsx)(an,{dividers:!0,children:En?(0,w.jsx)(C,{rightTitle:new Date(6e4*Math.floor(Date.now()/6e4)).toLocaleString()+" (current)",leftTitle:new Date(6e4*En[0]).toLocaleString(),oldValue:JSON.stringify(En[1],null,2),newValue:JSON.stringify(n.context.props.formData,null,2)}):null}),(0,w.jsxs)(sn,{children:[(0,w.jsx)(ln,{onClick:function(){zn(!1),n.context.props.onChange(En[0]),On()},children:"Restore"}),(0,w.jsx)(ln,{onClick:On,children:"Close"})]})]})]})}),(0,w.jsxs)(sn,{children:[(0,w.jsx)(ln,{onClick:function(){zn(!1),window.sessionStorage.removeItem(fn)},children:"Erase storage"}),(0,w.jsx)(ln,{onClick:function(){zn(!1)},children:"Close"})]})]})]})})}}}]);
//# sourceMappingURL=6324.75e3f9ed.chunk.js.map